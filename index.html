<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Лещеброс</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    background: linear-gradient(135deg,#8e2de2,#4a00e0); 
    color: white; 
    text-align: center; 
    padding: 20px; 
  }
  h1 { font-size: 3em; margin-bottom: 20px; text-shadow: 2px 2px 5px #000; }
  .characters { display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; }
  .character-box { text-align: center; }
  .character-box img { width: 150px; height: 150px; object-fit: cover; border: 3px solid transparent; border-radius: 15px; cursor: pointer; transition: transform 0.3s; }
  .character-box img.selected { border-color: yellow; transform: scale(1.1); }
  input.name-input { margin-bottom: 5px; padding: 5px; border-radius: 5px; border: none; text-align: center; }
  button { padding: 15px 30px; font-size: 18px; border: none; border-radius: 15px; cursor: pointer; background: yellow; color: black; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.2s; }
  button:hover { transform: scale(1.05); }
  #chat { max-width: 600px; margin: 20px auto; background: rgba(255,255,255,0.9); color: black; border-radius: 15px; padding: 15px; height: 250px; overflow-y: auto; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
  .hand { 
    position: absolute; 
    width: 100px; 
    transform: translate(-50%, -50%) rotate(-45deg); 
    display: none; 
    z-index: 10; 
  }
</style>
</head>
<body>

<h1>Лещеброс</h1>

<div class="characters">
  <div class="character-box">
    <input class="name-input" id="leftName" type="text" placeholder="Имя Левого">
    <input type="file" id="leftUpload"><br>
    <img id="leftImg" src="" alt="Выбери фото">
  </div>
  <div class="character-box">
    <input class="name-input" id="rightName" type="text" placeholder="Имя Правого">
    <input type="file" id="rightUpload"><br>
    <img id="rightImg" src="" alt="Выбери фото">
  </div>
</div>

<button id="slapBtn">Дать леща</button>

<div id="chat"></div>

<img id="handImg" src="hand.png" class="hand"/>
<audio id="slapSound" src="slap2.mp3"></audio>

<script>
const leftImg = document.getElementById('leftImg');
const rightImg = document.getElementById('rightImg');
const leftUpload = document.getElementById('leftUpload');
const rightUpload = document.getElementById('rightUpload');
const chat = document.getElementById('chat');
const slapBtn = document.getElementById('slapBtn');
const slapSound = document.getElementById('slapSound');
const handImg = document.getElementById('handImg');
const leftNameInput = document.getElementById('leftName');
const rightNameInput = document.getElementById('rightName');

const zoomerPhrases = [
  "щовель","пикми","абаюдно","тунг тунг сахур","ой ой халепа","киси киси мяу мяу","воглод",
  "флекс","чиль","топчик","лол","сай","краш","дроп","чел","зашквар","зумерский вайб","чекни","глитч","френд","гопник","треш","кринж","хаус","мемчик","патимейкер","тюн","чилл","ба","шаришь"
];

const normalPhrases = [
  "ты чо еблан?","ты ваще ебанулся?","на нахуй?","лсный мусор","ублюдок слабый",
  "иди нахуй","дебил","слабак","пошел вон","отстой","кринж","ни на что не годен","хули","бестолочь","лох","фу","иди гуляй","ну ты и…","чмо","да ты совсем","нахрен","иди в бан","лохушка","тормоз","жмот","пакостник","неадекват","тряпка","отпад","иди лесом","гад"
];

leftUpload.addEventListener('change', (e) => {
  leftImg.src = URL.createObjectURL(e.target.files[0]);
});

rightUpload.addEventListener('change', (e) => {
  rightImg.src = URL.createObjectURL(e.target.files[0]);
});

slapBtn.addEventListener('click', () => {
  if (!leftImg.src || !rightImg.src) return alert("Выбери обе фотки!");
  
  // Воспроизвести звук
  slapSound.currentTime = 0;
  slapSound.play();
  
  // Рассчитать позиции фоток
  const leftRect = leftImg.getBoundingClientRect();
  const rightRect = rightImg.getBoundingClientRect();
  const leftTopMiddle = leftRect.top + leftRect.height/2;
  const rightTopMiddle = rightRect.top + rightRect.height/2;

  // Решаем, кто говорит
  let isLeft = Math.random() > 0.5;
  let phrase;
  let startX, endX, topY;
  if(isLeft){
    phrase = `${leftNameInput.value || "Левый"}: ${zoomerPhrases[Math.floor(Math.random()*zoomerPhrases.length)]}`;
    startX = leftRect.right;
    endX = rightRect.left;
    topY = leftTopMiddle;
  } else {
    phrase = `${rightNameInput.value || "Правый"}: ${normalPhrases[Math.floor(Math.random()*normalPhrases.length)]}`;
    startX = rightRect.left;
    endX = leftRect.right;
    topY = rightTopMiddle;
  }

  chat.innerHTML += `<p>${phrase}</p>`;
  chat.scrollTop = chat.scrollHeight;

  handImg.style.top = topY + "px";
  handImg.style.left = startX + "px";
  handImg.style.display = "block";

  // Анимация руки
  handImg.animate([
    { transform: "translate(0, -50%) rotate(-45deg) scale(0)" },
    { transform: `translate(${endX - startX}px, -50%) rotate(-45deg) scale(1.2)` },
    { transform: `translate(${endX - startX}px, -50%) rotate(-45deg) scale(1)` }
  ], {
    duration: 400,
    fill: "forwards"
  });

});
</script>

</body>
</html>
